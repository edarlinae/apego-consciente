import { Injectable } from '@angular/core';

// Interfaz para la estructura de cada ejercicio
export interface Exercise {
  icon: string;
  title: string;
  description: string;
  steps: string[];
}

// Tipos para los estilos de apego, para mayor seguridad en el c√≥digo
export type AttachmentStyle = 'Ansioso' | 'Evitativo' | 'Seguro' | 'Desorganizado';

// Base de datos de ejercicios por combinaci√≥n de estilos
const exercisesData: Record<string, Exercise[]> = {
  // --- DIN√ÅMICAS YA EXISTENTES ---
  'Ansioso-Seguro': [
    { icon: 'üí¨', title: 'El Chequeo Emocional Diario', description: 'Un ritual diario para que el ansioso exprese su necesidad de conexi√≥n y el seguro ofrezca tranquilidad sin sentirse presionado.', steps: ['Acordad un momento del d√≠a sin distracciones (ej. 10 min despu√©s de cenar).','El miembro ansioso comparte: "Hoy me he sentido (emoci√≥n) y lo que necesitar√≠a de ti ahora es (necesidad espec√≠fica, ej: un abrazo, escucharme 5 min)".','El miembro seguro escucha activamente, valida la emoci√≥n ("Entiendo que te sientas as√≠") y ofrece la tranquilidad pedida.','El objetivo no es resolver problemas, sino conectar y validar.'] },
    { icon: 'üß†', title: 'Cuestionando la Narrativa del Miedo', description: 'Ejercicio para que el ansioso aprenda a desafiar sus pensamientos catastr√≥ficos con la ayuda l√≥gica y calmada del seguro.', steps: ['Cuando el ansioso sienta un pico de ansiedad (ej. "no me ha escrito, algo va mal"), lo comparte con el seguro.','El seguro, en lugar de decir "no te preocupes", pregunta con curiosidad: "¬øQu√© es lo peor que crees que podr√≠a pasar? ¬øY qu√© tres explicaciones alternativas y m√°s probables existen?".','Juntos, exploran las evidencias reales que contradicen el miedo.','El seguro ayuda al ansioso a anclarse en la realidad de la relaci√≥n, no en la ansiedad.'] },
    { icon: '‚ù§Ô∏è', title: 'El Tarro de la Seguridad', description: 'Una forma visual y tangible de acumular pruebas de la seguridad del v√≠nculo, para que el ansioso pueda recurrir a ellas en momentos de duda.', steps: ['Decorad un tarro o una caja juntos.','Cada vez que el miembro seguro haga algo que aporte seguridad (un mensaje inesperado, un gesto de apoyo), el miembro ansioso lo escribe en un papelito y lo mete en el tarro.','Cuando el ansioso sienta inseguridad, puede abrir el tarro y leer los recuerdos de seguridad.','Esto entrena al cerebro ansioso a enfocarse en las pruebas de conexi√≥n, no en las de posible abandono.'] },
    { icon: 'üó∫Ô∏è', title: 'Mapa de la Independencia Compartida', description: 'Fomenta que el ansioso desarrolle su mundo interior, apoyado por la confianza del seguro.', steps: ['En una cartulina, cada uno escribe 3 hobbies o intereses que quiere desarrollar por su cuenta.','El miembro seguro expresa verbalmente su apoyo incondicional: "Me encanta que hagas esto por ti, cu√©ntame c√≥mo te va".','Agendan "citas individuales" en el calendario y se comprometen a respetarlas.','Al reencontrarse, comparten con entusiasmo sus experiencias, enriqueciendo la relaci√≥n.'] },
    { icon: 'ü§ù', title: 'Negociando la Necesidad de Espacio', description: 'Un ejercicio para que el seguro pueda pedir espacio sin activar el miedo al abandono del ansioso.', steps: ['El seguro aprende a pedir espacio de forma proactiva y con un tiempo definido: "Necesito una hora para m√≠, pero a las 8 estoy totalmente para ti".','El ansioso practica la auto-calma durante ese tiempo, usando una de sus estrategias (ver secci√≥n "Recursos").','Es crucial que el seguro cumpla el tiempo prometido para construir confianza.','Al volver, el seguro inicia la reconexi√≥n con un gesto de afecto, reforzando que el espacio no es rechazo.'] },
    { icon: 'üó£Ô∏è', title: 'Traduciendo el Lenguaje del Apego', description: 'Aprender a comunicar las necesidades de forma que el otro pueda entenderlas y satisfacerlas.', steps: ['El ansioso traduce su protesta ("¬°Nunca me escuchas!") a una necesidad vulnerable ("Me siento solo/a y necesito sentir que te importo").','El seguro traduce su retirada ("Necesito estar solo") a una necesidad de regulaci√≥n ("Me siento abrumado/a y necesito un momento para procesar antes de poder hablar").','Practican usar estas nuevas frases en conversaciones de bajo riesgo.','Esto crea un puente de empat√≠a y reduce los malentendidos.'] }
  ],
  'Ansioso-Evitativo': [
    { icon: 'üö¶', title: 'El Sem√°foro de la Conexi√≥n', description: 'Una herramienta visual para que el ansioso pueda medir el nivel de disponibilidad del evitativo sin presionar, y el evitativo pueda comunicar su estado sin palabras.', steps: ['Cread tres tarjetas: una verde ("Estoy disponible y receptivo"), una amarilla ("Necesito un momento, me siento algo saturado") y una roja ("Ahora mismo no puedo, necesito espacio para m√≠").','El miembro evitativo puede colocar la tarjeta correspondiente en un lugar visible (ej. en la nevera).','El miembro ansioso se compromete a respetar la se√±al, usando ese tiempo para su propio autocuidado.','Esto reduce la persecuci√≥n del ansioso y la huida del evitativo, creando un espacio m√°s seguro para ambos.'] },
    { icon: 'üèùÔ∏è', title: 'La Isla Segura', description: 'Crear un tiempo y espacio sagrado para la conexi√≥n, libre de demandas y presiones, donde ambos puedan bajar sus defensas.', steps: ['Agendad 20 minutos, dos veces por semana, como "Tiempo en la Isla Segura".','Durante este tiempo, est√° prohibido hablar de problemas de la relaci√≥n, log√≠stica o temas estresantes.','Solo pueden hacer algo agradable juntos: escuchar una canci√≥n, tomar un t√©, compartir algo bueno del d√≠a.','El objetivo es que el evitativo asocie la cercan√≠a con calma y disfrute, y el ansioso reciba una dosis predecible de conexi√≥n.'] },
    { icon: 'üì¶', title: 'La Caja de las Preocupaciones', description: 'Un lugar simb√≥lico para que el ansioso "deposite" sus ansiedades en lugar de volcarlas sobre el evitativo, y que puedan ser revisadas en un momento pactado.', steps: ['Decorad una caja juntos.','Cuando el ansioso tenga una preocupaci√≥n sobre la relaci√≥n, la escribe y la mete en la caja.','Una vez a la semana, abren la caja juntos y hablan sobre uno o dos de los papeles de forma calmada.','Esto ense√±a al ansioso a contener su ansiedad y al evitativo a no sentirse constantemente bombardeado.'] },
    { icon: 'üèÜ', title: 'Celebrando la Autonom√≠a del Otro', description: 'Cambiar el enfoque de la interdependencia a la celebraci√≥n de la individualidad de cada uno.', steps: ['El miembro ansioso hace un esfuerzo consciente por animar al evitativo a tener su propio espacio y hobbies.','El miembro evitativo comparte algo positivo de su tiempo a solas, mostrando que no es un rechazo.','Ambos se agradecen mutuamente el respeto por la independencia del otro.','Esto ayuda al evitativo a sentirse menos "atrapado" y al ansioso a construir su propia autoestima.'] },
    { icon: 'üìú', title: 'El Guion de la Desactivaci√≥n', description: 'Tener frases preparadas para desactivar el ciclo de persecuci√≥n-huida cuando empieza.', steps: ['El ansioso prepara la frase: "Veo que necesitas espacio. Voy a cuidar de m√≠. Aqu√≠ estoy cuando est√©s listo/a".','El evitativo prepara la frase: "No es por ti. Me siento saturado/a. Necesito X minutos y vuelvo".','Practican decirlas en voz alta cuando est√°n calmados.','Usarlas durante un conflicto rompe el patr√≥n autom√°tico y da a ambos un respiro para regularse.'] },
    { icon: 'üíñ', title: 'Afecto No Exigente', description: 'Encontrar formas de conexi√≥n f√≠sica que no se sientan abrumadoras para el evitativo.', steps: ['Explorad formas de contacto que no sean cara a cara, como sentarse espalda con espalda mientras leen, o tocarse los pies en el sof√°.','El ansioso propone: "¬øTe apetece un abrazo de 10 segundos?", dando control y un l√≠mite claro al evitativo.','Normalizad el afecto casual, como un toque en el brazo al pasar.','Esto permite la conexi√≥n sin la intensidad que puede abrumar al evitativo.'] }
  ],
  'Seguro-Evitativo': [
    { icon: '‚öì', title: 'El Ancla de la Calma', description: 'T√∫, como ancla segura, ayudas a tu pareja a regularse cuando se siente abrumada, sin presionar.', steps: ['Cuando notes que tu pareja se distancia, en lugar de preguntar "¬øQu√© te pasa?", prueba a decir con calma: "Parece que es un momento intenso. T√≥mate el espacio que necesites, yo estoy aqu√≠".','Ofrece apoyo no verbal: un vaso de agua, una manta, o simplemente tu presencia silenciosa en la misma habitaci√≥n.','No intentes "solucionar" su emoci√≥n. Tu calma es el mejor co-regulador.','Esto le ense√±a al evitativo que la intimidad no tiene por qu√© ser invasiva y que puede contar con tu presencia estable.'] },
    { icon: 'üóìÔ∏è', title: 'Rituales de Conexi√≥n Predecibles', description: 'La predictibilidad crea seguridad para el evitativo. Establecer rituales de conexi√≥n de baja presi√≥n.', steps: ['Acordad una actividad corta y regular que sea solo vuestra. Ej: tomar el caf√© juntos 15 minutos por la ma√±ana sin m√≥viles.','Mantened este ritual de forma consistente. La clave es la fiabilidad, no la intensidad.','Durante el ritual, enfocaos en temas ligeros y positivos. No es el momento de discusiones profundas.','Esto construye una base de confianza y demuestra que la conexi√≥n puede ser segura y no demandante.'] },
    { icon: 'üó£Ô∏è', title: 'Comunicaci√≥n Proactiva del Espacio', description: 'Como persona segura, puedes modelar c√≥mo comunicar las necesidades de forma saludable, incluyendo la tuya.', steps: ['S√© el primero en decir: "Hoy he tenido un d√≠a duro, necesito 30 minutos para desconectar antes de que hablemos".','Al hacer esto, normalizas la necesidad de espacio y demuestras que no significa rechazo.','Anima a tu pareja a hacer lo mismo, sin juzgar la cantidad de tiempo que necesite.','Esto le da al evitativo el "permiso" y el lenguaje para pedir lo que necesita sin sentirse culpable.'] },
    { icon: 'üîç', title: 'El Detective de Intereses', description: 'Muestra un inter√©s genuino en el mundo interior y las pasiones de tu pareja evitativa.', steps: ['En lugar de preguntar por sus sentimientos, pregunta por sus hobbies, proyectos o cosas que ha aprendido.','Haz preguntas abiertas y curiosas sobre esos temas: "¬øQu√© es lo que m√°s te gusta de eso? ¬øC√≥mo funciona?".','Escucha activamente sin intentar convertirlo en una conversaci√≥n emocional.','Conectar a trav√©s de sus pasiones es una puerta trasera hacia la intimidad que se siente mucho m√°s segura para ellos.'] },
    { icon: 'ü§ù', title: 'El Equipo de Resoluci√≥n de Problemas', description: 'Abordar los problemas como un equipo contra el problema, no como t√∫ contra tu pareja.', steps: ['Plantea los problemas de forma pr√°ctica y l√≥gica. "Tenemos este desaf√≠o log√≠stico. ¬øQu√© soluciones se te ocurren?".','Usa un lenguaje de equipo: "Nosotros", "nuestro desaf√≠o", "juntos".','Enfocaos en la acci√≥n y las soluciones, no solo en el an√°lisis de las emociones.','Esto apela a la fortaleza del evitativo en la resoluci√≥n pr√°ctica y reduce la sensaci√≥n de ataque emocional.'] },
    { icon: 'üíå', title: 'Aprecio por Escrito', description: 'El afecto expresado de forma indirecta puede ser m√°s f√°cil de recibir para una persona evitativa.', steps: ['D√©jale una nota corta y espec√≠fica agradeciendo algo que hizo: "Gracias por preparar el caf√© esta ma√±ana, me ha encantado".','Env√≠ale un mensaje de texto apreciando una cualidad suya: "Admiro mucho lo bien que se te da [su habilidad]".','No esperes una gran reacci√≥n emocional. El mensaje ser√° recibido y procesado internamente.','Esta forma de comunicaci√≥n as√≠ncrona respeta su necesidad de procesar las emociones en privado.'] }
  ],
  
  // --- NUEVAS DIN√ÅMICAS ---

  'Ansioso-Ansioso': [
    { icon: 'üåä', title: 'Surfear la Ola de Ansiedad Juntos', description: 'En lugar de que la ansiedad de uno active la del otro, aprended a reconocerla y gestionarla como equipo.', steps: ['Cuando uno sienta ansiedad, lo comunica: "Estoy en una ola de ansiedad ahora mismo".', 'El otro, en lugar de intentar solucionarlo, responde: "Ok, estoy aqu√≠ contigo. ¬øQu√© necesitas? ¬øEspacio, un abrazo, silencio?".', 'Practicad la respiraci√≥n diafragm√°tica juntos por 2 minutos para co-regular vuestros sistemas nerviosos.', 'El objetivo es ser un ancla para el otro, no un catalizador.'] },
    { icon: 'üõ°Ô∏è', title: 'El Escudo de la Autoestima Individual', description: 'Fortalecer la seguridad individual para que la relaci√≥n no sea la √∫nica fuente de validaci√≥n.', steps: ['Cada uno escribe 3 cosas que le gustan de s√≠ mismo, que no tengan nada que ver con la relaci√≥n.', 'Durante la semana, cada uno debe realizar una actividad que nutra su propia autoestima (un hobby, ejercicio, etc.).', 'Al final de la semana, comparten qu√© hicieron y c√≥mo se sintieron, celebrando la independencia del otro.', 'Una relaci√≥n de dos personas seguras es m√°s fuerte que una de dos personas que se necesitan para sentirse completas.'] },
    { icon: 'üìù', title: 'El Contrato de la Comunicaci√≥n Clara', description: 'Establecer reglas claras para evitar leer la mente y asumir lo peor.', steps: ['Acordad no usar el silencio como castigo. Si necesit√°is espacio, se comunica verbalmente.', 'Pactad preguntar directamente en lugar de asumir: "¬øLa historia que me estoy contando es que est√°s enfadado/a, es as√≠?".', 'Comprometeos a expresar las necesidades de forma positiva: "Me encantar√≠a que pas√°ramos tiempo juntos" en lugar de "Nunca hacemos nada".', 'Revisad el contrato semanalmente para ver c√≥mo va.'] },
    { icon: '‚ùì', title: 'La Hora de la Curiosidad', description: 'Reemplazar la ansiedad por la curiosidad sobre la pareja.', steps: ['Dedicad 15 minutos a haceros preguntas abiertas que no tengan que ver con el estado de la relaci√≥n.', 'Ejemplos: "¬øQu√© es algo que te ha hecho re√≠r esta semana?", "¬øSi pudieras tener un superpoder, cu√°l ser√≠a y por qu√©?".', 'La √∫nica regla es escuchar sin interrumpir y sin relacionar la respuesta con uno mismo.', 'Esto fomenta la conexi√≥n genuina y reduce el an√°lisis ansioso.'] },
    { icon: '‚õî', title: 'Pausar la Escalada', description: 'Aprender a identificar cu√°ndo una conversaci√≥n se est√° volviendo una espiral de ansiedad y c√≥mo detenerla.', steps: ['Definid una "palabra de seguridad" (ej. "pausa", "sem√°foro rojo").', 'Cuando uno de los dos la dice, la conversaci√≥n se detiene inmediatamente, sin excepci√≥n.', 'Ambos se toman 20 minutos para calmarse por separado (caminar, respirar, escuchar m√∫sica).', 'Solo se retoma la conversaci√≥n cuando ambos se sientan regulados y con la intenci√≥n de escuchar.'] },
    { icon: 'üéâ', title: 'El Banco de los √âxitos', description: 'Crear un registro de las veces que hab√©is navegado con √©xito la ansiedad y hab√©is fortalecido la relaci√≥n.', steps: ['Comprad un cuaderno especial para la relaci√≥n.', 'Despu√©s de superar un momento de ansiedad o un conflicto de forma saludable, escribid qu√© pas√≥ y qu√© hicisteis bien como equipo.', 'Anotad tambi√©n gestos de seguridad y cari√±o que os hay√°is ofrecido.', 'Leer este "banco" en momentos de duda refuerza la confianza en vuestra capacidad para estar bien juntos.'] }
  ],
  'Ansioso-Desorganizado': [
    { icon: 'üè°', title: 'Construyendo el Refugio Seguro', description: 'La prioridad es crear una base de predictibilidad y seguridad para calmar ambos sistemas nerviosos.', steps: ['El ansioso se enfoca en ser consistente en sus respuestas, evitando la protesta ansiosa (mensajes masivos, llamadas).', 'El desorganizado practica la transparencia, comunicando su necesidad de espacio con una frase pactada: "Necesito entrar en mi cueva un rato, pero no es por ti. Volver√©".', 'Estableced un ritual de conexi√≥n diario, muy corto y de baja presi√≥n (ej. 5 minutos de abrazo en silencio).', 'La consistencia es la clave para que el desorganizado empiece a confiar en la conexi√≥n.'] },
    { icon: '‚úã', title: 'La Se√±al de "Stop" Respetuosa', description: 'Dar al desorganizado una herramienta para frenar la intensidad del ansioso sin que se sienta como un rechazo total.', steps: ['Acordad una se√±al no verbal (ej. levantar la mano con la palma abierta) que signifique "Tu intensidad me est√° abrumando, necesito que bajes el volumen".', 'Cuando el desorganizado usa la se√±al, el ansioso se compromete a detenerse, respirar y reformular su petici√≥n de forma m√°s suave.', 'El ansioso practica decir: "Ok, lo entiendo. Lo intento de nuevo m√°s despacio".', 'Esto da poder al desorganizado y ense√±a al ansioso a modular su energ√≠a.'] },
    { icon: 'üé≠', title: 'Poniendo Nombre a los "Personajes"', description: 'Reconocer las diferentes partes que se activan en cada uno durante un conflicto (el "perseguidor" ansioso, el "fugitivo" asustado del desorganizado, etc.).', steps: ['En un momento de calma, hablad sobre qu√© partes de vosotros aparecen cuando os sent√≠s activados.', 'Dadle nombres divertidos a esas partes ("el detective ansioso", "el fantasma asustado").', 'Durante un conflicto, pod√©is decir: "Creo que mi detective est√° tomando el control" o "Mi fantasma quiere huir".', 'Esto despersonaliza el conflicto y crea una distancia que permite observarlo con m√°s calma.'] },
    { icon: 'ü©π', title: 'El Ritual de la Reparaci√≥n', description: 'El ciclo de ruptura y reparaci√≥n es clave. Establecer un protocolo claro para despu√©s de un conflicto.', steps: ['Tras una discusi√≥n, ambos se toman un tiempo pactado para calmarse.', 'La reparaci√≥n la inicia quien se sienta capaz primero, con una frase simple: "Lamento c√≥mo ha ido eso. ¬øPodemos reconectar?".', 'La reconexi√≥n no es para seguir discutiendo, sino para restablecer el v√≠nculo (un abrazo, sentarse juntos).', 'La conversaci√≥n sobre el problema se puede tener m√°s tarde, cuando la conexi√≥n sea segura de nuevo.'] },
    { icon: 'üßò', title: 'Anclaje en el Presente Compartido', description: 'Un ejercicio de mindfulness para sacar a ambos de las historias de miedo del pasado (desorganizado) y del futuro (ansioso).', steps: ['Sentaos uno frente al otro y sosteneos las manos.', 'Durante 3 minutos, simplemente notad la sensaci√≥n del contacto de las manos.', 'Luego, por turnos, describid algo que veis en la habitaci√≥n en ese momento, de forma neutra ("Veo la l√°mpara encendida").', 'Este ejercicio os ancla en la seguridad del momento presente y calma el sistema nervioso.'] },
    { icon: 'üå±', title: 'Jardiner√≠a de la Confianza', description: 'El ansioso planta "semillas" de confianza y el desorganizado aprende a "regarlas".', steps: ['El ansioso realiza actos de confianza peque√±os y medibles, como no preguntar con qui√©n est√° el desorganizado cuando sale.', 'El desorganizado, al notar esto, ofrece una peque√±a "actualizaci√≥n" voluntaria: "¬°Hola! Tomando algo con X, te cuento luego".', 'El ansioso agradece esta informaci√≥n sin pedir m√°s detalles.', 'Poco a poco, esto construye un ciclo de confianza mutua en lugar de un ciclo de control y miedo.'] }
  ],
  'Evitativo-Evitativo': [
    { icon: 'üìÖ', title: 'La Cita No Negociable', description: 'Romper la rutina de "compa√±eros de piso" con una conexi√≥n intencionada y agendada.', steps: ['Agendad una "cita" de 30 minutos a la semana. Es inamovible.', 'Durante la cita, la √∫nica regla es hacer algo juntos que no sea ver una pantalla pasivamente. Puede ser preparar un t√© especial, escuchar un disco, etc.', 'No hay presi√≥n para tener conversaciones profundas. El objetivo es compartir un espacio y un tiempo.', 'La regularidad y la intenci√≥n son m√°s importantes que la duraci√≥n.'] },
    { icon: 'Parallel Play', title: 'Juego en Paralelo para Adultos', description: 'Conectar a trav√©s de la proximidad y la actividad compartida, sin la presi√≥n de la interacci√≥n directa.', steps: ['Elegid una actividad que ambos pod√°is hacer en la misma habitaci√≥n, pero de forma individual (leer, dibujar, escuchar m√∫sica con auriculares).', 'Pasad 30-45 minutos en esta "burbuja compartida".', 'La presencia del otro se vuelve reconfortante en lugar de demandante.', 'Es una forma de intimidad que respeta la necesidad de independencia de ambos.'] },
    { icon: '‚ùì', title: 'La Pregunta de la Curiosidad', description: 'Una forma estructurada y de baja presi√≥n para mostrar inter√©s m√°s all√° de la log√≠stica diaria.', steps: ['Cada uno escribe 3 preguntas abiertas y no emocionales en papelitos y los mete en un cuenco.', 'Una vez al d√≠a, cada uno saca un papel y le hace la pregunta al otro.', 'Ejemplos: "¬øQu√© es lo m√°s interesante que has aprendido esta semana?", "¬øSi pudieras viajar a cualquier √©poca, cu√°l ser√≠a?".', 'La respuesta no debe durar m√°s de 2 minutos. Fomenta el conocimiento mutuo sin sentirse como una entrevista.'] },
    { icon: 'üëç', title: 'El Reconocimiento Pr√°ctico', description: 'El lenguaje del afecto para los evitativos a menudo es pr√°ctico y basado en actos de servicio.', steps: ['Haced un esfuerzo consciente por notar y agradecer los actos de servicio del otro.', 'En lugar de un "te quiero", probad con un "Gracias por encargarte de la basura, valoro mucho que lo hagas".', 'Este tipo de reconocimiento es concreto y menos vulnerable que una declaraci√≥n emocional directa.', 'Valida la forma en que el otro demuestra su afecto y cuidado.'] },
    { icon: ' getaway', title: 'Plan de Escape Conjunto', description: 'Usar vuestra habilidad compartida para la planificaci√≥n y la independencia para un objetivo com√∫n.', steps: ['Planificad juntos una escapada o una actividad futura que os entusiasme a ambos.', 'Dedicad tiempo a investigar destinos, actividades, etc. Esto se convierte en un proyecto compartido.', 'El acto de planificar es una forma de conectar que se siente productiva y no puramente emocional.', 'Genera una anticipaci√≥n positiva y un "nosotros" frente a un objetivo externo.'] },
    { icon: 'üí¨', title: 'El Informe de "Bater√≠a Social"', description: 'Una forma l√≥gica y no emocional de comunicar los niveles de energ√≠a para la interacci√≥n.', steps: ['Al final del d√≠a, cada uno puede comunicar su "nivel de bater√≠a social" en un porcentaje.', '"Hoy estoy al 20%, necesito una noche tranquila". O "Estoy al 70%, me apetece charlar un rato".', 'No se juzga el n√∫mero, solo se informa.', 'Esto permite gestionar las expectativas de interacci√≥n de forma clara y sin que nadie se sienta rechazado.'] }
  ],
  'Evitativo-Desorganizado': [
    { icon: 'üõ°Ô∏è', title: 'El Escudo y el Ancla', description: 'El evitativo aprende a ser un "escudo" predecible y el desorganizado un "ancla" que no persigue.', steps: ['El evitativo se compromete a no desaparecer sin avisar. Usa una frase clave: "Necesito mi espacio ahora. No es un castigo. Volver√© en X tiempo".', 'El desorganizado se compromete a no perseguir durante ese tiempo. En su lugar, practica una t√©cnica de grounding (ej. sentir sus pies en el suelo).', 'Es vital que el evitativo cumpla su palabra y regrese.', 'Esto rompe el ciclo de huida-persecuci√≥n y empieza a construir una confianza fr√°gil.'] },
    { icon: 'üß±', title: 'Construyendo Ladrillo a Ladrillo', description: 'La confianza se construye con acciones peque√±as, consistentes y predecibles, no con grandes gestos emocionales.', steps: ['Empezad con promesas muy peque√±as y cumplidlas. "Te llamar√© a las 5". Y llamar a las 5.', 'Celebrad estos peque√±os actos de fiabilidad. "Gracias por llamar cuando dijiste que lo har√≠as. Eso significa mucho para m√≠".', 'El evitativo aprende que el compromiso no es una trampa mortal.', 'El desorganizado aprende que puede confiar en la palabra del otro, calmando su caos interno.'] },
    { icon: 'ü§´', title: 'El Secreto Compartido', description: 'Crear un peque√±o mundo de intimidad segura compartiendo algo de baja vulnerabilidad.', steps: ['Cada uno comparte un "secreto" o un pensamiento que no haya contado a mucha gente, pero que no sea profundamente traum√°tico.', 'Puede ser un sue√±o tonto, una opini√≥n impopular sobre una pel√≠cula, etc.', 'El receptor solo puede decir "Gracias por compartir eso conmigo". No se analiza ni se juzga.', 'Esto crea un peque√±o contenedor de confianza que puede ir expandi√©ndose.'] },
    { icon: 'üé®', title: 'Comunicaci√≥n No Verbal', description: 'Cuando las palabras son demasiado peligrosas o abrumadoras, usar otros canales.', steps: ['Cread una playlist compartida. Cada uno a√±ade canciones que reflejen su estado de √°nimo.', 'Dibujad o escribid en un cuaderno compartido, sin necesidad de que el otro lo vea inmediatamente.', 'Acordad un gesto f√≠sico de baja intensidad que signifique "pienso en ti", como un apret√≥n suave en el hombro.', 'Reduce la presi√≥n de la comunicaci√≥n verbal y permite la expresi√≥n segura.'] },
    { icon: 'üßò‚Äç‚ôÇÔ∏è', title: 'Regulaci√≥n en Paralelo', description: 'Aprender a calmarse en presencia del otro, pero sin exigirse interacci√≥n.', steps: ['Cuando ambos est√©is activados, id a la misma habitaci√≥n pero a esquinas opuestas.', 'Cada uno practica su propia t√©cnica de regulaci√≥n (respirar, estirar, etc.) en silencio durante 10 minutos.', 'Saber que el otro est√° ah√≠, tambi√©n intentando calmarse, crea una sensaci√≥n de "equipo" en la lucha contra el caos.', 'El objetivo no es conectar, sino aprender a no ser una amenaza para el otro en momentos de estr√©s.'] },
    { icon: 'üö∂', title: 'Caminatas de Hombro con Hombro', description: 'La interacci√≥n es menos intimidante cuando no es cara a cara.', steps: ['Dad paseos regulares juntos, caminando uno al lado del otro.', 'La conversaci√≥n no es obligatoria. Pod√©is hablar del paisaje, de temas neutros o simplemente caminar en silencio.', 'El movimiento f√≠sico ayuda a procesar la energ√≠a emocional.', 'Esta forma de "intimidad en movimiento" es a menudo m√°s segura para ambos estilos que una conversaci√≥n sentados en el sof√°.'] }
  ],
  'Seguro-Seguro': [
    { icon: 'üå±', title: 'El Jard√≠n de la Relaci√≥n', description: 'Una revisi√≥n peri√≥dica para cuidar activamente la relaci√≥n y no darla por sentada.', steps: ['Una vez al mes, dedicad 30 minutos a vuestro "jard√≠n".', 'Cada uno responde a tres preguntas: "¬øQu√© ha sido un "rayo de sol" para nosotros este mes?", "¬øQu√© "mala hierba" (peque√±a molestia) deber√≠amos quitar?", "¬øQu√© "semilla" (nuevo plan o sue√±o) queremos plantar?".', 'Se trata de un mantenimiento proactivo y positivo.', 'Asegura que la relaci√≥n siga creciendo y evolucionando.'] },
    { icon: 'üó∫Ô∏è', title: 'El Mapa de los Sue√±os Compartidos', description: 'Ir m√°s all√° del d√≠a a d√≠a y alinear vuestras aspiraciones a largo plazo.', steps: ['Cread un "mapa del tesoro" o un collage visual de vuestros sue√±os para los pr√≥ximos 5 a√±os.', 'Incluid metas individuales, de pareja y familiares (si aplica).', 'Colocadlo en un lugar visible como recordatorio de vuestro proyecto de vida en com√∫n.', 'Este ejercicio refuerza el sentimiento de equipo y de prop√≥sito compartido.'] },
    { icon: 'üé≠', title: 'Intercambio de Roles', description: 'Fomentar la empat√≠a y la comprensi√≥n profunda poni√©ndose en los zapatos del otro.', steps: ['Ante un desacuerdo menor, haced una pausa y representad la situaci√≥n desde la perspectiva del otro.', 'Intentad argumentar el punto de vista de vuestra pareja con la mayor sinceridad posible.', 'No se trata de estar de acuerdo, sino de demostrar que hab√©is entendido su perspectiva.', 'Es un ejercicio avanzado de validaci√≥n que fortalece la conexi√≥n emocional.'] },
    { icon: 'üî•', title: 'Manteniendo Viva la Chispa', description: 'Introducir novedad y juego para evitar que la comodidad se convierta en rutina.', steps: ['Cread un "tarro de citas sorpresa". Cada uno escribe 10 ideas para citas (desde algo gratis como un picnic a algo m√°s elaborado).', 'Una vez cada dos semanas, sacad un papelito y comprometeos a hacer lo que ponga.', 'La sorpresa y la novedad activan los mismos circuitos cerebrales que al principio de la relaci√≥n.', 'Fomenta el juego, la diversi√≥n y los nuevos recuerdos compartidos.'] },
    { icon: 'üìö', title: 'El Club de Lectura para Dos', description: 'Crecer juntos intelectual y emocionalmente a trav√©s de un est√≠mulo compartido.', steps: ['Elegid un libro (de ficci√≥n o no ficci√≥n) o un documental para experimentar juntos cada mes.', 'Dedicad un tiempo espec√≠fico para hablar sobre ello: qu√© os ha gustado, qu√© os ha hecho pensar, etc.', 'No tiene que ser un an√°lisis acad√©mico, sino una excusa para compartir ideas y perspectivas.', 'Crea nuevas capas de intimidad m√°s all√° de lo puramente personal.'] },
    { icon: 'üôè', title: 'La Rueda de la Gratitud Espec√≠fica', description: 'Ir m√°s all√° del "gracias" gen√©rico y apreciar las cualidades y acciones concretas del otro.', steps: ['Sentaos frente a frente una vez a la semana.', 'Por turnos, completad la frase: "Algo que he valorado de ti esta semana es... y me ha hecho sentir...".', 'Sed lo m√°s espec√≠ficos posible. "Valoro que ayer prepararas la cena porque estaba agotado/a, y me hizo sentir muy cuidado/a".', 'Este ritual refuerza positivamente los comportamientos que nutren la relaci√≥n y profundiza el aprecio mutuo.'] }
  ],
  'Seguro-Desorganizado': [
    { icon: '‚öì', title: 'El Ancla y el Barco', description: 'El seguro act√∫a como un ancla estable mientras el desorganizado navega las tormentas de su emoci√≥n.', steps: ['Cuando el desorganizado se sienta activado, el seguro no intenta "arreglarlo", sino que se mantiene presente y calmado. Su frase clave es: "Estoy aqu√≠. No me voy a ir. Respira conmigo".', 'El seguro puede ofrecer anclajes f√≠sicos: una mano firme en el hombro, una manta pesada.', 'No se toman las reacciones del desorganizado (ira, miedo) como algo personal, entendi√©ndolas como una tormenta que pasar√°.', 'Esta presencia incondicional es el ant√≠doto m√°s poderoso contra el miedo al abandono del desorganizado.'] },
    { icon: 'üìñ', title: 'Co-creando la Nueva Historia', description: 'Ayudar al desorganizado a reescribir su narrativa interna sobre las relaciones, usando la seguridad del v√≠nculo actual.', steps: ['El desorganizado comparte un miedo o creencia negativa ("Si me acerco mucho, me har√°s da√±o").', 'El seguro escucha y luego ofrece una "contra-evidencia" del presente: "Entiendo que sientas eso por tu pasado. En nuestra relaci√≥n, cuando te has acercado, ¬øqu√© ha pasado? ¬øTe he hecho da√±o?".', 'Juntos, buscan pruebas en su relaci√≥n actual que desaf√≠en las creencias antiguas.', 'Poco a poco, la evidencia del presente empieza a pesar m√°s que las heridas del pasado.'] },
    { icon: 'üß©', title: 'Poniendo las Piezas en Orden', description: 'El seguro ayuda al desorganizado a entender sus propias reacciones, que a menudo le resultan confusas.', steps: ['Despu√©s de un episodio de desregulaci√≥n (y una vez que ambos est√©n en calma), el seguro pregunta con curiosidad: "¬øQu√© crees que activ√≥ esa sensaci√≥n tan fuerte? ¬øTe record√≥ a algo?".', 'El seguro act√∫a como un espejo amable, ayudando a conectar la reacci√≥n presente con posibles ecos del pasado.', 'No se juzga, solo se explora con compasi√≥n.', 'Esto ayuda al desorganizado a desarrollar la auto-comprensi√≥n y a sentirse menos "loco" o "roto".'] },
    { icon: '‚úÖ', title: 'La Previsibilidad es Seguridad', description: 'El caos interno del desorganizado se calma con la consistencia externa.', steps: ['El seguro se esfuerza por ser extremadamente fiable y predecible en sus rutinas.', 'Si dice "te llamo en 10 minutos", llama exactamente en 10 minutos.', 'Se comunican los cambios de planes con antelaci√≥n y claridad.', 'Cada promesa cumplida es un ladrillo m√°s en la construcci√≥n de un castillo de seguridad para el desorganizado.'] },
    { icon: 'üó£Ô∏è', title: 'Validaci√≥n Radical', description: 'Validar la emoci√≥n del desorganizado, incluso si su reacci√≥n parece desproporcionada.', steps: ['La frase clave del seguro es: "Tiene todo el sentido del mundo que te sientas as√≠, dadas tus experiencias".', 'Esto no significa estar de acuerdo con el comportamiento, sino validar la emoci√≥n subyacente.', 'Ej: "Entiendo perfectamente que sientas p√°nico, aunque en esta situaci√≥n estemos a salvo".', 'La validaci√≥n reduce la verg√ºenza y permite que la emoci√≥n se procese en lugar de enquistarse.'] },
    { icon: 'üöß', title: 'L√≠mites Seguros', description: 'El seguro establece l√≠mites claros y firmes, pero de forma amorosa, lo que parad√≥jicamente crea m√°s seguridad.', steps: ['El seguro dice: "Te quiero much√≠simo, y no voy a permitir que me grites. Podemos hablar cuando estemos m√°s calmados".', 'El l√≠mite no es un castigo, sino una protecci√≥n para la relaci√≥n y para ambos.', 'Esto le ense√±a al desorganizado que el amor puede coexistir con los l√≠mites, y que no ser√° abandonado por su comportamiento, pero que s√≠ hay reglas para la interacci√≥n segura.', 'Un l√≠mite claro es m√°s seguro que un caos sin reglas.'] }
  ],
  'Desorganizado-Desorganizado': [
    { icon: 'üßò‚Äç‚ôÄÔ∏è', title: 'El Anclaje Mutuo', description: 'La prioridad n√∫mero uno es aprender a regularse. Este es el ejercicio base e innegociable.', steps: ['Acordad una "palabra de seguridad" (ej. "ancla"). Cuando uno la dice, toda interacci√≥n se detiene.', 'Ambos van a espacios separados (o esquinas opuestas de una habitaci√≥n) y practican una t√©cnica de grounding por 5 minutos (ej. nombrar 5 cosas que ven, 4 que tocan...).', 'No se vuelve a interactuar hasta que ambos sientan sus pies firmes en el suelo.', 'El objetivo no es resolver el problema, sino sobrevivir a la tormenta emocional sin hacerse m√°s da√±o.'] },
    { icon: 'üìù', title: 'El Diario de la Realidad Presente', description: 'Ambos cerebros tienden a ser secuestrados por el pasado. Este ejercicio os trae de vuelta al aqu√≠ y ahora.', steps: ['Comprad un cuaderno que ser√° el "Diario de Realidad".', 'Cada d√≠a, cada uno escribe una cosa segura y real sobre vuestra relaci√≥n en el momento presente. Ej: "Hoy me preparaste caf√©", "Hoy nos re√≠mos viendo una serie".', 'Cuando uno de los dos se sienta activado por un miedo, puede leer el diario.', 'Esto ayuda a contrarrestar la narrativa catastr√≥fica con peque√±as dosis de realidad segura.'] },
    { icon: 'üö¶', title: 'Comunicaci√≥n por Sem√°foro', description: 'Las conversaciones pueden escalar muy r√°pido. Este sistema ralentiza la comunicaci√≥n.', steps: ['Antes de hablar de un tema delicado, cada uno dice en qu√© "color" est√°: Verde (calmado, puedo hablar), Amarillo (inquieto, necesito ir despacio), Rojo (activado, no puedo hablar de esto ahora).', 'Si uno de los dos est√° en rojo, el tema se pospone sin discusi√≥n.', 'Si uno est√° en amarillo, la conversaci√≥n debe ser muy lenta y con pausas.', 'Esto previene las emboscadas emocionales.'] },
    { icon: 'ü©π', title: 'El Kit de Primeros Auxilios para la Reparaci√≥n', description: 'Las rupturas son inevitables. Tener un plan claro para la reparaci√≥n es vital.', steps: ['Cread un "kit" f√≠sico o mental. Puede incluir: una frase de disculpa pactada ("Siento mi parte en lo que acaba de pasar"), una actividad calmante (una canci√≥n, un t√©), un gesto de paz (un abrazo corto).', 'Despu√©s de usar la palabra de seguridad y calmarse, el primero que se sienta capaz, ofrece algo del kit.', 'La reparaci√≥n no es para volver a discutir, es solo para decir "seguimos siendo un equipo a pesar del caos".', 'La rapidez y la predictibilidad de la reparaci√≥n construyen seguridad.'] },
    { icon: 'ü§ù', title: 'Micro-Compromisos de Confianza', description: 'La confianza es casi nula. Se construye con las acciones m√°s peque√±as y fiables posibles.', steps: ['Haced promesas diminutas y cumplidlas. "Voy a sacar la basura en 5 minutos". Y hacedlo.', 'Agradeced expl√≠citamente el cumplimiento: "Gracias por hacer lo que dijiste que har√≠as".', 'No hag√°is promesas a futuro. El foco est√° en construir fiabilidad en el plazo de la pr√≥xima hora.', 'Cada micro-compromiso cumplido es una gota de agua en un desierto de desconfianza.'] },
    { icon: '‚ù§Ô∏è‚Äçü©π', title: 'Celebrando la "Suficiente Bondad"', description: 'El perfeccionismo es un enemigo. El objetivo no es una relaci√≥n perfecta, sino una "suficientemente buena" y segura.', steps: ['Al final de la semana, compartid un "momento suficientemente bueno" que hay√°is tenido.', 'No tiene que ser espectacular. "El mi√©rcoles, cuando est√°bamos en silencio en el sof√°, me sent√≠ en paz por un minuto. Eso fue suficientemente bueno para m√≠".', 'Celebrar estos momentos reduce la presi√≥n y os ayuda a ver el valor en la calma, no solo en la intensidad.', 'Cambia el objetivo de la "pasi√≥n" o la "fusi√≥n" a la "paz compartida".'] }
  ]
};


@Injectable({
  providedIn: 'root'
})
export class ExercisesService {
  /**
   * Obtiene la lista de ejercicios para una combinaci√≥n espec√≠fica de estilos de apego.
   * La l√≥gica es sim√©trica: busca tanto "A-B" como "B-A".
   * @param userStyle Estilo de apego del usuario.
   * @param partnerStyle Estilo de apego de la pareja.
   * @returns Un array de ejercicios.
   */
  getExercisesForStyles(userStyle: AttachmentStyle, partnerStyle: AttachmentStyle): Exercise[] {
    const key = `${userStyle}-${partnerStyle}`;
    const reverseKey = `${partnerStyle}-${userStyle}`;

    // Devuelve los ejercicios para la clave directa (ej. Ansioso-Seguro)
    // o para la clave inversa (ej. Seguro-Ansioso) si la primera no existe.
    // Si ninguna existe, devuelve un array vac√≠o.
    return exercisesData[key] || exercisesData[reverseKey] || [];
  }
}

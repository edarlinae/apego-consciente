<div class="journal-container">
  <!-- Cabecera de la sección -->
  <div class="journal-header">
    <h1>Diario de Emociones</h1>
    <p>Un espacio seguro para registrar tus sentimientos y reflexionar sobre tus interacciones.</p>
    <!-- Botón para mostrar/ocultar el formulario -->
    <button class="add-entry-btn" (click)="isFormVisible = !isFormVisible">
      {{ isFormVisible ? 'Cerrar Formulario' : 'Añadir Nueva Entrada' }}
    </button>
  </div>

  <!-- Formulario para añadir nueva entrada (se muestra condicionalmente) -->
  <div *ngIf="isFormVisible" class="form-container">
    <form [formGroup]="journalForm" (ngSubmit)="onSubmit()">
      <div class="form-field">
        <label for="title">Título de la entrada</label>
        <input id="title" type="text" formControlName="title" placeholder="Ej: Discusión sobre las tareas">
      </div>
      <div class="form-field">
        <label for="emotion">¿Qué emoción principal sentiste?</label>
        <select id="emotion" formControlName="emotion">
          <option value="" disabled>Selecciona una emoción</option>
          <option *ngFor="let emotion of emotions" [value]="emotion">{{ emotion }}</option>
        </select>
      </div>
      <div class="form-field">
        <label for="description">Describe la situación</label>
        <textarea id="description" formControlName="description" rows="5" placeholder="¿Qué pasó? ¿Cómo te sentiste? ¿Qué hiciste?"></textarea>
      </div>
      <button type="submit" class="submit-btn" [disabled]="journalForm.invalid">Guardar Entrada</button>
    </form>
  </div>

  <!-- Lista de entradas del diario -->
  <div class="entries-list">
    <!-- Se muestra si hay al menos una entrada -->
    <div *ngIf="userService.journalEntries().length > 0; else noEntries">
      <!-- Itera sobre las entradas del diario obtenidas del servicio -->
      <div *ngFor="let entry of userService.journalEntries()" class="entry-card">
        <div class="entry-card-header">
          <h3>{{ entry.title }}</h3>
          <!-- El pipe 'date' formatea la fecha a un formato legible -->
          <span class="entry-date">{{ entry.date | date:'d MMMM, yyyy' }}</span>
        </div>
        <div class="entry-card-body">
          <p>{{ entry.description }}</p>
        </div>
        <div class="entry-card-footer">
          <span class="emotion-tag">{{ entry.emotion }}</span>
        </div>
      </div>
    </div>
    <!-- Bloque que se muestra si no hay entradas en el diario -->
    <ng-template #noEntries>
      <div class="no-entries-placeholder">
        <p>Tu diario está vacío.</p>
        <span>¡Crea tu primera entrada para empezar a reflexionar sobre tu viaje!</span>
      </div>
    </ng-template>
  </div>
</div>

<div class="profile-container">
  <div *ngIf="userService.profile() as userProfile">
    <div class="profile-header">
      <h1>Perfil de Usuario</h1>
      <p>{{ userProfile.email }}</p>
    </div>

    <div class="result-wrapper">
      <div *ngIf="userProfile.testResult; else noTest">
        <ng-container *ngIf="userProfile.testResult.details as details">
          <!-- --- SECCIÓN CORREGIDA --- -->
          <div class="result-header">
            <span class="result-subtitle">Tu estilo de apego principal es</span>
            <h2 class="result-style">{{ userProfile.testResult.style }}</h2>
            <h3 class="result-archetype">"{{ details.title }}"</h3>
          </div>

          <div class="result-details-grid">
            <div class="detail-card">
              <h4>Miedo Subyacente</h4>
              <p>{{ details.coreFear }}</p>
            </div>
            <div class="detail-card">
              <h4>Tu Camino hacia la Seguridad</h4>
              <p>{{ details.growthPath }}</p>
            </div>
          </div>

          <div class="characteristics-card">
            <h4>Características Clave</h4>
            <ul>
              <li *ngFor="let characteristic of details.characteristics">
                {{ characteristic }}
              </li>
            </ul>
          </div>
        </ng-container>
      </div>

      <ng-template #noTest>
        <div class="no-result">
          <h2>Resultado del Test de Apego</h2>
          <p>Aún no has completado el test de estilo de apego.</p>
          <a routerLink="/test-apego" class="action-button">Hacer el test ahora</a>
        </div>
      </ng-template>
    </div>
  </div>
</div>
